<?xml version='1.0' encoding='utf-8'?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
  <channel>
    <title>gwax (Posts about code snippets)</title>
    <link>https://gwax.com/</link>
    <description/>
    <atom:link href="https://gwax.com/categories/code-snippets.xml" rel="self" type="application/rss+xml"/>
    <language>en</language>
    <copyright>Contents &amp;copy;2005-2022 &lt;a href="link://slug/about-person"&gt;George Leslie-Waksman&lt;/a&gt; 
&lt;a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"&gt;
    &lt;img
        src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
        alt="Creative Commons License BY-SA"
        style="border:0;margin:0;"
    /&gt;
&lt;/a&gt;
</copyright>
    <lastBuildDate>Wed, 04 May 2022 07:16:33 GMT</lastBuildDate>
    <generator>Nikola (getnikola.com)</generator>
    <docs>http://blogs.law.harvard.edu/tech/rss</docs>
    <item>
      <title>An Arbitrary map from SQL with Go</title>
      <link>https://gwax.com/blog/2019/10/an-arbitrary-map-from-sql-with-go.html</link>
      <dc:creator>George Leslie-Waksman</dc:creator>
      <description>&lt;p&gt;I've been writing a lot of &lt;a class="reference external" href="https://golang.org/"&gt;Go&lt;/a&gt; lately and finding it a pleasant balance of
simplicity, power, functionality, and ecosystem support. In a lot of cases, I
am finding the guarantees afforded by type safety to be really nice but,
occasionally, the strict requirements can make some easy things much harder
than I want them to be.&lt;/p&gt;
&lt;p&gt;Recently, I found myself wanting to test the behavior of some code the hit a
SQL database. Specifically, I wanted to check the results of a handful of
queries with varied columns and column types. With &lt;a class="reference external" href="https://www.python.org/"&gt;Python&lt;/a&gt;, I'd approach this
with &lt;a class="reference external" href="https://www.sqlalchemy.org/"&gt;SQLAlchemy&lt;/a&gt;, and turn the result into a &lt;code&gt;list&lt;/code&gt; of &lt;code&gt;dict&lt;/code&gt;s.&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_d746e7ca6bf24b38b4916b54b969bc0a-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;rows_to_dicts&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_d746e7ca6bf24b38b4916b54b969bc0a-2"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""Covert a SQLAlchemy RowProxy into a list of dicts."""&lt;/span&gt;
&lt;a name="rest_code_d746e7ca6bf24b38b4916b54b969bc0a-3"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;From here, it's pretty straightforward to assert the result matches
expectations. If you're using &lt;a class="reference external" href="https://docs.pytest.org/en/latest/"&gt;pytest&lt;/a&gt;, you'll also get really clear details on
where the results aren't what you expect. If you don't have the expected
columns or column types spot on, you're assertion will be off but you won't
hit any underlying errors at this point of your testing.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://golang.org/"&gt;Go&lt;/a&gt;, on the other hand doesn't have quite as easy an option. The crux of the
problem is that the only way to get a result row out of a sql query is via
&lt;a class="reference external" href="https://golang.org/pkg/database/sql/#Rows.Scan"&gt;(*Rows) Scan&lt;/a&gt;, which
demands you know something about the structure of the result before you
query. Luckily &lt;code&gt;Scan&lt;/code&gt; is happy to read anything into a &lt;code&gt;*string&lt;/code&gt;
as long as you're asking for the right number of values so we can write an
equivalent function to the python list comprehension.&lt;/p&gt;
&lt;pre class="code go"&gt;&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-2"&gt;&lt;/a&gt;    &lt;span class="s"&gt;"database/sql"&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-3"&gt;&lt;/a&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-5"&gt;&lt;/a&gt;&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;RowsToMaps&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;rows&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;sql&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Rows&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;([]&lt;/span&gt;&lt;span class="kd"&gt;map&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-6"&gt;&lt;/a&gt;    &lt;span class="nx"&gt;columns&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Columns&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-7"&gt;&lt;/a&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-8"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-9"&gt;&lt;/a&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-10"&gt;&lt;/a&gt;    &lt;span class="nx"&gt;columnCount&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;columns&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-11"&gt;&lt;/a&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-12"&gt;&lt;/a&gt;    &lt;span class="nx"&gt;cursor&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nb"&gt;make&lt;/span&gt;&lt;span class="p"&gt;([]&lt;/span&gt;&lt;span class="kd"&gt;interface&lt;/span&gt;&lt;span class="p"&gt;{},&lt;/span&gt; &lt;span class="nx"&gt;columnCount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-13"&gt;&lt;/a&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nx"&gt;columnCount&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-14"&gt;&lt;/a&gt;        &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;columnValue&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-15"&gt;&lt;/a&gt;        &lt;span class="nx"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nx"&gt;columnValue&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-16"&gt;&lt;/a&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-17"&gt;&lt;/a&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-18"&gt;&lt;/a&gt;    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;resultMaps&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="kd"&gt;map&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-19"&gt;&lt;/a&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Next&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-20"&gt;&lt;/a&gt;        &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Scan&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-21"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-22"&gt;&lt;/a&gt;            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;resultMaps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-23"&gt;&lt;/a&gt;        &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-24"&gt;&lt;/a&gt;        &lt;span class="nx"&gt;rowMap&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nb"&gt;make&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;map&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;columnCount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-25"&gt;&lt;/a&gt;        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;columnPtr&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="nx"&gt;cursor&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-26"&gt;&lt;/a&gt;            &lt;span class="nx"&gt;key&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;columns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-27"&gt;&lt;/a&gt;            &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;columnStr&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-28"&gt;&lt;/a&gt;            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;columnStrPtr&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;columnPtr&lt;/span&gt;&lt;span class="p"&gt;.(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="nx"&gt;columnStrPtr&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-29"&gt;&lt;/a&gt;                &lt;span class="nx"&gt;columnStr&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;columnStrPtr&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-30"&gt;&lt;/a&gt;            &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-31"&gt;&lt;/a&gt;            &lt;span class="nx"&gt;rowMap&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;columnStr&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-32"&gt;&lt;/a&gt;        &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-33"&gt;&lt;/a&gt;        &lt;span class="nx"&gt;resultMaps&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;resultMaps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;rowMap&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-34"&gt;&lt;/a&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-35"&gt;&lt;/a&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Err&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-36"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;resultMaps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-37"&gt;&lt;/a&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-38"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;resultMaps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt;
&lt;a name="rest_code_8f61d469a5124f9992ca1509327a9e86-39"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;This, much like the &lt;a class="reference external" href="https://www.python.org/"&gt;Python&lt;/a&gt; above, gives us a list of maps of column name
to column value, with the minor caveats that all values are strings and
&lt;code&gt;NULL&lt;/code&gt; values become empty strings. I found it a useful chunk of code,
so I thought I'd throw it up.&lt;/p&gt;
&lt;p&gt;Sure, it's more verbose but sometimes that's the price we pay for dealing
with dynamic results in a staticly typed language. There are other prices
paid in the other direction.&lt;/p&gt;</description>
      <category>code snippets</category>
      <category>golang</category>
      <guid>https://gwax.com/blog/2019/10/an-arbitrary-map-from-sql-with-go.html</guid>
      <pubDate>Mon, 21 Oct 2019 04:13:56 GMT</pubDate>
    </item>
    <item>
      <title>Let's Encrypt on App Engine</title>
      <link>https://gwax.com/blog/2016/03/lets-encrypt-on-app-engine.html</link>
      <dc:creator>George Leslie-Waksman</dc:creator>
      <description>&lt;div&gt;&lt;p&gt;&lt;strong&gt;UPDATE&lt;/strong&gt;: &lt;a class="reference external" href="https://cloudplatform.googleblog.com/2017/09/introducing-managed-SSL-for-Google-App-Engine.html"&gt;As of September, 2017&lt;/a&gt;,
Google App Engine will &lt;a class="reference external" href="https://cloud.google.com/appengine/docs/standard/python/securing-custom-domains-with-ssl"&gt;manage SSL certificates for you&lt;/a&gt;.&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;&lt;a class="reference external" href="https://letsencrypt.org/"&gt;Let's Encrypt&lt;/a&gt; is a fantastically convenient way
to get SSL certificates for your website without paying a bunch of money or
resorting to a &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Self-signed_certificate"&gt;self-signed certificate&lt;/a&gt;. It's also pretty easy to set up.&lt;/p&gt;
&lt;p&gt;Easy as it is to set up, the instructions don't really explain much about
setup for &lt;a class="reference external" href="https://cloud.google.com/appengine/"&gt;App Engine&lt;/a&gt;. It turns out to
be pretty straightforward.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://gwax.com/blog/2016/03/lets-encrypt-on-app-engine.html"&gt;Read more…&lt;/a&gt; (2 min remaining to read)&lt;/p&gt;&lt;/div&gt;</description>
      <category>code snippets</category>
      <category>meta</category>
      <guid>https://gwax.com/blog/2016/03/lets-encrypt-on-app-engine.html</guid>
      <pubDate>Sun, 13 Mar 2016 07:25:01 GMT</pubDate>
    </item>
    <item>
      <title>Internet Time Now script</title>
      <link>https://gwax.com/blog/2016/02/internet-time-now-script.html</link>
      <dc:creator>George Leslie-Waksman</dc:creator>
      <description>&lt;p&gt;On account of being mentioned by &lt;a class="reference external" href="https://gimletmedia.com/show/reply-all/"&gt;Reply All&lt;/a&gt;,
I've been listening to back episodes of
&lt;a class="reference external" href="http://www.onthemedia.org/tags/tldr_podcast/"&gt;[TLDR]&lt;/a&gt;. Listening to
&lt;a class="reference external" href="http://www.onthemedia.org/story/15-internet-time/"&gt;#15 - Internet Time&lt;/a&gt; caught
my attention and made me aware of
&lt;a class="reference external" href="https://en.wikipedia.org/wiki/Swatch_Internet_Time"&gt;Swatch Internet Time&lt;/a&gt;.
It's kind of impractical but also kind of fun, especially as I've been a little
annoyed at recording times across timezones for something meant to persist,
like this blog.&lt;/p&gt;
&lt;p&gt;For fun, I whipped up a quick python implementation:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;decimal&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decimal_time&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ts&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-5"&gt;&lt;/a&gt;    &lt;span class="n"&gt;mus_ts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hour&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;3600&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;ts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;minute&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;ts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;second&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1000000&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;ts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;microsecond&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-6"&gt;&lt;/a&gt;    &lt;span class="n"&gt;mus_day&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;3600&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1000000&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-7"&gt;&lt;/a&gt;    &lt;span class="n"&gt;dec_time&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;decimal&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Decimal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mus_ts&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;decimal&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Decimal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mus_day&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-8"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;dec_time&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-9"&gt;&lt;/a&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-10"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;internet_time_now&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;precision&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-11"&gt;&lt;/a&gt;    &lt;span class="n"&gt;precision&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;precision&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-12"&gt;&lt;/a&gt;    &lt;span class="n"&gt;precision&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;precision&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;precision&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-13"&gt;&lt;/a&gt;    &lt;span class="n"&gt;format_len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;precision&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;precision&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-14"&gt;&lt;/a&gt;    &lt;span class="n"&gt;format_str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'@{{:0&lt;/span&gt;&lt;span class="si"&gt;{l:d}&lt;/span&gt;&lt;span class="s1"&gt;.0&lt;/span&gt;&lt;span class="si"&gt;{p:d}&lt;/span&gt;&lt;span class="s1"&gt;f}}'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;format_len&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;precision&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-15"&gt;&lt;/a&gt;    &lt;span class="n"&gt;it_utc_p1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timedelta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hours&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_95e39d1f957c433fbb044f338f94925c-16"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;format_str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;decimal_time&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;it_utc_p1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Or, if you don't care about precision:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_ecbdc7b9e0c64997bf148d923db55dd6-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt;
&lt;a name="rest_code_ecbdc7b9e0c64997bf148d923db55dd6-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_ecbdc7b9e0c64997bf148d923db55dd6-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decimal_time&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ts&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_ecbdc7b9e0c64997bf148d923db55dd6-4"&gt;&lt;/a&gt;    &lt;span class="n"&gt;s_ts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hour&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;3600&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;ts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;minute&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;ts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;second&lt;/span&gt;
&lt;a name="rest_code_ecbdc7b9e0c64997bf148d923db55dd6-5"&gt;&lt;/a&gt;    &lt;span class="n"&gt;s_day&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;3600&lt;/span&gt;
&lt;a name="rest_code_ecbdc7b9e0c64997bf148d923db55dd6-6"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;s_ts&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;s_day&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_ecbdc7b9e0c64997bf148d923db55dd6-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_ecbdc7b9e0c64997bf148d923db55dd6-8"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;internet_time_now&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_ecbdc7b9e0c64997bf148d923db55dd6-9"&gt;&lt;/a&gt;    &lt;span class="n"&gt;it_utc_p1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timedelta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hours&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_ecbdc7b9e0c64997bf148d923db55dd6-10"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;'@&lt;/span&gt;&lt;span class="si"&gt;{:03d}&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;decimal_time&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;it_utc_p1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;</description>
      <category>code snippets</category>
      <category>time</category>
      <guid>https://gwax.com/blog/2016/02/internet-time-now-script.html</guid>
      <pubDate>Fri, 05 Feb 2016 19:40:05 GMT</pubDate>
    </item>
    <item>
      <title>Fixing Nikola Footnote Locations</title>
      <link>https://gwax.com/blog/2016/01/fixing-nikola-footnote-locations.html</link>
      <dc:creator>George Leslie-Waksman</dc:creator>
      <description>&lt;p&gt;Personally, I prefer to intersperse my footnote declarations with the text
that is being footnoted when writing my. For example:&lt;a class="footnote-reference" href="https://gwax.com/blog/2016/01/fixing-nikola-footnote-locations.html#id2" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="id2" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="https://gwax.com/blog/2016/01/fixing-nikola-footnote-locations.html#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;This is just an example.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre class="code ReST"&gt;&lt;a name="rest_code_2444aafe754746ddba21a88c9acc6e37-1"&gt;&lt;/a&gt;I might want to write something&lt;span class="s"&gt;[#]_&lt;/span&gt; where there's a footnote there.
&lt;a name="rest_code_2444aafe754746ddba21a88c9acc6e37-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_2444aafe754746ddba21a88c9acc6e37-3"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="nt"&gt;[#]&lt;/span&gt; I put the footnote definition here.
&lt;a name="rest_code_2444aafe754746ddba21a88c9acc6e37-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_2444aafe754746ddba21a88c9acc6e37-5"&gt;&lt;/a&gt;And then I continue on with the rest of my writing.
&lt;/pre&gt;&lt;p&gt;Wherever they are declared, I prefer to have all of my footnotes appear at the
end of my posts. By default, &lt;a class="reference external" href="https://getnikola.com"&gt;Nikola&lt;/a&gt;  puts the
footnotes in wherever they are declared. A simple snippet of javascript can be
used to fix the locations of footnotes:&lt;/p&gt;
&lt;pre class="code javascript"&gt;&lt;a name="rest_code_316d4293478e44f0af86b871235703ff-1"&gt;&lt;/a&gt;&lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;ready&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_316d4293478e44f0af86b871235703ff-2"&gt;&lt;/a&gt;    &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'.footnote'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;each&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;el&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_316d4293478e44f0af86b871235703ff-3"&gt;&lt;/a&gt;        &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;el&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;appendTo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_316d4293478e44f0af86b871235703ff-4"&gt;&lt;/a&gt;            &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;el&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;closest&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'.entry-content,.entry-summary'&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;a name="rest_code_316d4293478e44f0af86b871235703ff-5"&gt;&lt;/a&gt;    &lt;span class="p"&gt;});&lt;/span&gt;
&lt;a name="rest_code_316d4293478e44f0af86b871235703ff-6"&gt;&lt;/a&gt;&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Simply wrap in a &amp;lt;script&amp;gt; tag and include in the BODY_END section of conf.py
or add it to your theme.&lt;/p&gt;</description>
      <category>code snippets</category>
      <category>meta</category>
      <category>nikola</category>
      <guid>https://gwax.com/blog/2016/01/fixing-nikola-footnote-locations.html</guid>
      <pubDate>Sat, 23 Jan 2016 23:44:17 GMT</pubDate>
    </item>
  </channel>
</rss>
