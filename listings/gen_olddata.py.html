<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#" vocab="http://ogp.me/ns">
<head>
  <meta charset="utf-8">
  <meta content="gen_olddata.py" name="description">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <title>gen_olddata.py | gwax</title>
  <link href="/assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
  <link href="/assets/css/normalize.min.css" rel="stylesheet" type="text/css">
  <link href="/assets/css/skeleton.min.css" rel="stylesheet" type="text/css">
  <link href="/assets/css/rst_base.css" rel="stylesheet" type="text/css">
  <link href="/assets/css/code.css" rel="stylesheet" type="text/css">
  <link href="/assets/css/theme.css" rel="stylesheet" type="text/css">
  <meta content="#304FE1" name="theme-color">
  <meta content="Nikola (getnikola.com)" name="generator">
  <link href="/rss.xml" hreflang="en" rel="alternate" title="RSS" type="application/rss+xml">
  <link href="https://gwax.com/listings/gen_olddata.py.html" rel="canonical">
  <link href="/favicon.ico" rel="icon" sizes="32x32"><!--[if lt IE 9]><script src="/assets/js/html5shiv-printshiv.min.js"></script><![endif]-->
</head>
<body>
  <div class="container">
    <header id="header">
      <div class="row">
        <div class="six columns">
          <h1 class="title" id="brand"><a href="/" rel="home" title="gwax"><span id="blog-title">gwax</span></a></h1>
        </div>
      </div>
    </header>
    <nav class="bar">
      <ul>
        <li>
          <a href="/projects.html">Projects</a>
        </li>
        <li>
          <span>Blog</span>
          <ul>
            <li>
              <a href="/index.html">Posts</a>
            </li>
            <li>
              <a href="/archive.html">Archives</a>
            </li>
            <li>
              <a href="/categories/index.html">Tags & Categories</a>
            </li>
            <li>
              <a href="/rss.xml">RSS feed</a>
            </li>
          </ul>
        </li>
        <li>
          <span>About</span>
          <ul>
            <li>
              <a href="/about/about-person.html">The person</a>
            </li>
            <li>
              <a href="/about/about-site.html">The site</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="/about/about-person.html#contact">Contact</a>
        </li>
      </ul>
    </nav>
    <nav class="select">
      <select>
        <option value="/projects.html">
          Projects
        </option>
        <optgroup label="Blog">
          <option value="/index.html">
            Posts
          </option>
          <option value="/archive.html">
            Archives
          </option>
          <option value="/categories/index.html">
            Tags & Categories
          </option>
          <option value="/rss.xml">
            RSS feed
          </option>
        </optgroup>
        <optgroup label="About">
          <option value="/about/about-person.html">
            The person
          </option>
          <option value="/about/about-site.html">
            The site
          </option>
        </optgroup>
        <option value="/about/about-person.html#contact">
          Contact
        </option>
      </select>
    </nav>
    <main id="content">
      <nav class="breadcrumbs">
        <ul class="breadcrumb">
          <li>
            <a href="/listings/">listings</a>
          </li>
          <li>gen_olddata.py</li>
        </ul>
      </nav>
      <h1>gen_olddata.py <small><a href="/listings/gen_olddata.py">(Source)</a></small></h1>
      <div class="code">
        <table class="codetable">
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-1"><code data-line-number="1"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-1" name="listingsgen_olddatapy-1"></a><span class="ch">#!/usr/bin/env python3</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-2"><code data-line-number="2"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-2" name="listingsgen_olddatapy-2"></a><span class="sd">"""Pull old posts / comments from mysql."""</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-3"><code data-line-number="3"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-3" name="listingsgen_olddatapy-3"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-4"><code data-line-number="4"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-4" name="listingsgen_olddatapy-4"></a><span class="kn">import</span> <span class="nn">collections</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-5"><code data-line-number="5"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-5" name="listingsgen_olddatapy-5"></a><span class="kn">import</span> <span class="nn">datetime</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-6"><code data-line-number="6"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-6" name="listingsgen_olddatapy-6"></a><span class="kn">import</span> <span class="nn">html</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-7"><code data-line-number="7"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-7" name="listingsgen_olddatapy-7"></a><span class="kn">import</span> <span class="nn">os</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-8"><code data-line-number="8"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-8" name="listingsgen_olddatapy-8"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-9"><code data-line-number="9"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-9" name="listingsgen_olddatapy-9"></a><span class="kn">import</span> <span class="nn">pypandoc</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-10"><code data-line-number="10"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-10" name="listingsgen_olddatapy-10"></a><span class="kn">import</span> <span class="nn">sqlalchemy</span> <span class="k">as</span> <span class="nn">sa</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-11"><code data-line-number="11"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-11" name="listingsgen_olddatapy-11"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-12"><code data-line-number="12"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-12" name="listingsgen_olddatapy-12"></a><span class="n">TARGET</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-13"><code data-line-number="13"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-13" name="listingsgen_olddatapy-13"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-14"><code data-line-number="14"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-14" name="listingsgen_olddatapy-14"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="s1">'..'</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-15"><code data-line-number="15"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-15" name="listingsgen_olddatapy-15"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="s1">'posts'</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-16"><code data-line-number="16"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-16" name="listingsgen_olddatapy-16"></a><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-17"><code data-line-number="17"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-17" name="listingsgen_olddatapy-17"></a><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">TARGET</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-18"><code data-line-number="18"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-18" name="listingsgen_olddatapy-18"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-19"><code data-line-number="19"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-19" name="listingsgen_olddatapy-19"></a><span class="n">ENGINE</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">create_engine</span><span class="p">(</span><span class="s1">'mysql+mysqlconnector://root@localhost/oldblog'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-20"><code data-line-number="20"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-20" name="listingsgen_olddatapy-20"></a><span class="n">META</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">MetaData</span><span class="p">(</span><span class="n">ENGINE</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-21"><code data-line-number="21"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-21" name="listingsgen_olddatapy-21"></a><span class="n">POSTS</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">'gw_posts'</span><span class="p">,</span> <span class="n">META</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-22"><code data-line-number="22"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-22" name="listingsgen_olddatapy-22"></a><span class="n">COMMENTS</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">'gw_comments'</span><span class="p">,</span> <span class="n">META</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-23"><code data-line-number="23"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-23" name="listingsgen_olddatapy-23"></a><span class="n">TERMS</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">'gw_terms'</span><span class="p">,</span> <span class="n">META</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-24"><code data-line-number="24"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-24" name="listingsgen_olddatapy-24"></a><span class="n">TERM_TAXO</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">'gw_term_taxonomy'</span><span class="p">,</span> <span class="n">META</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-25"><code data-line-number="25"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-25" name="listingsgen_olddatapy-25"></a><span class="n">TERM_RELS</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">'gw_term_relationships'</span><span class="p">,</span> <span class="n">META</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-26"><code data-line-number="26"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-26" name="listingsgen_olddatapy-26"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-27"><code data-line-number="27"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-27" name="listingsgen_olddatapy-27"></a><span class="n">COMMENT_BLACKLIST</span> <span class="o">=</span> <span class="p">{</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-28"><code data-line-number="28"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-28" name="listingsgen_olddatapy-28"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">887</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-29"><code data-line-number="29"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-29" name="listingsgen_olddatapy-29"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">20</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-30"><code data-line-number="30"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-30" name="listingsgen_olddatapy-30"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">21</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-31"><code data-line-number="31"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-31" name="listingsgen_olddatapy-31"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">844</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-32"><code data-line-number="32"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-32" name="listingsgen_olddatapy-32"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">61</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-33"><code data-line-number="33"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-33" name="listingsgen_olddatapy-33"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">62</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-34"><code data-line-number="34"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-34" name="listingsgen_olddatapy-34"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">439</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-35"><code data-line-number="35"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-35" name="listingsgen_olddatapy-35"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">951</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-36"><code data-line-number="36"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-36" name="listingsgen_olddatapy-36"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">952</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-37"><code data-line-number="37"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-37" name="listingsgen_olddatapy-37"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">978</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-38"><code data-line-number="38"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-38" name="listingsgen_olddatapy-38"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">979</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-39"><code data-line-number="39"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-39" name="listingsgen_olddatapy-39"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">993</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-40"><code data-line-number="40"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-40" name="listingsgen_olddatapy-40"></a><span class="p">}</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-41"><code data-line-number="41"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-41" name="listingsgen_olddatapy-41"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-42"><code data-line-number="42"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-42" name="listingsgen_olddatapy-42"></a><span class="k">def</span> <span class="nf">text_fix</span><span class="p">(</span><span class="n">text</span><span class="p">):</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-43"><code data-line-number="43"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-43" name="listingsgen_olddatapy-43"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="n">search</span><span class="p">,</span> <span class="n">replace</span> <span class="ow">in</span> <span class="p">[</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-44"><code data-line-number="44"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-44" name="listingsgen_olddatapy-44"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'</span><span class="se">\r</span><span class="s1">'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-45"><code data-line-number="45"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-45" name="listingsgen_olddatapy-45"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'Ã¼'</span><span class="p">,</span> <span class="s1">'ü'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-46"><code data-line-number="46"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-46" name="listingsgen_olddatapy-46"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'Ã®'</span><span class="p">,</span> <span class="s1">'î'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-47"><code data-line-number="47"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-47" name="listingsgen_olddatapy-47"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'â€™'</span><span class="p">,</span> <span class="s1">'’'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-48"><code data-line-number="48"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-48" name="listingsgen_olddatapy-48"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'â€œ'</span><span class="p">,</span> <span class="s1">'“'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-49"><code data-line-number="49"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-49" name="listingsgen_olddatapy-49"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'â€¦'</span><span class="p">,</span> <span class="s1">'…'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-50"><code data-line-number="50"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-50" name="listingsgen_olddatapy-50"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'â€'</span><span class="p">,</span> <span class="s1">'”'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-51"><code data-line-number="51"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-51" name="listingsgen_olddatapy-51"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'Ã¥'</span><span class="p">,</span> <span class="s1">'å'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-52"><code data-line-number="52"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-52" name="listingsgen_olddatapy-52"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'Ã†'</span><span class="p">,</span> <span class="s1">'Æ'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-53"><code data-line-number="53"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-53" name="listingsgen_olddatapy-53"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'Ã¦'</span><span class="p">,</span> <span class="s1">'æ'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-54"><code data-line-number="54"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-54" name="listingsgen_olddatapy-54"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'Ã¸'</span><span class="p">,</span> <span class="s1">'ø'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-55"><code data-line-number="55"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-55" name="listingsgen_olddatapy-55"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s1">'Ã˜'</span><span class="p">,</span> <span class="s1">'Ø'</span><span class="p">),</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-56"><code data-line-number="56"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-56" name="listingsgen_olddatapy-56"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">]:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-57"><code data-line-number="57"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-57" name="listingsgen_olddatapy-57"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">search</span><span class="p">,</span> <span class="n">replace</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-58"><code data-line-number="58"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-58" name="listingsgen_olddatapy-58"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">text</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-59"><code data-line-number="59"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-59" name="listingsgen_olddatapy-59"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-60"><code data-line-number="60"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-60" name="listingsgen_olddatapy-60"></a><span class="k">def</span> <span class="nf">clean_content</span><span class="p">(</span><span class="n">content</span><span class="p">):</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-61"><code data-line-number="61"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-61" name="listingsgen_olddatapy-61"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">content</span> <span class="o">=</span> <span class="n">text_fix</span><span class="p">(</span><span class="n">content</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-62"><code data-line-number="62"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-62" name="listingsgen_olddatapy-62"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="s1">'&lt;p&gt;'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-63"><code data-line-number="63"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-63" name="listingsgen_olddatapy-63"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">content</span> <span class="o">=</span> <span class="s1">'&lt;p&gt;'</span> <span class="o">+</span> <span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'</span><span class="se">\n\n</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'&lt;/p&gt;&lt;p&gt;'</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'&lt;/p&gt;'</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-64"><code data-line-number="64"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-64" name="listingsgen_olddatapy-64"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">content</span> <span class="o">=</span> <span class="n">pypandoc</span><span class="o">.</span><span class="n">convert_text</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s1">'rst'</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">'html'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-65"><code data-line-number="65"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-65" name="listingsgen_olddatapy-65"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="s1">'</span><span class="se">\n\n\n</span><span class="s1">'</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-66"><code data-line-number="66"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-66" name="listingsgen_olddatapy-66"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'</span><span class="se">\n\n\n</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'</span><span class="se">\n\n</span><span class="s1">'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-67"><code data-line-number="67"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-67" name="listingsgen_olddatapy-67"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-68"><code data-line-number="68"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-68" name="listingsgen_olddatapy-68"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">content</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-69"><code data-line-number="69"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-69" name="listingsgen_olddatapy-69"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-70"><code data-line-number="70"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-70" name="listingsgen_olddatapy-70"></a><span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">ENGINE</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">POSTS</span><span class="p">])):</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-71"><code data-line-number="71"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-71" name="listingsgen_olddatapy-71"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">post</span><span class="p">[</span><span class="s1">'post_status'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'publish'</span><span class="p">:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-72"><code data-line-number="72"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-72" name="listingsgen_olddatapy-72"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">print</span><span class="p">(</span><span class="s1">'!skipping unpublished:'</span><span class="p">,</span> <span class="n">post</span><span class="p">[</span><span class="s1">'post_name'</span><span class="p">])</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-73"><code data-line-number="73"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-73" name="listingsgen_olddatapy-73"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">continue</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-74"><code data-line-number="74"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-74" name="listingsgen_olddatapy-74"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">print</span><span class="p">(</span><span class="s1">'processing:'</span><span class="p">,</span> <span class="n">post</span><span class="p">[</span><span class="s1">'post_date_gmt'</span><span class="p">]</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">post</span><span class="p">[</span><span class="s1">'post_name'</span><span class="p">])</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-75"><code data-line-number="75"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-75" name="listingsgen_olddatapy-75"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">slug</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s1">'post_name'</span><span class="p">]</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-76"><code data-line-number="76"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-76" name="listingsgen_olddatapy-76"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">date</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s1">'post_date_gmt'</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-77"><code data-line-number="77"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-77" name="listingsgen_olddatapy-77"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">updated</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s1">'post_modified_gmt'</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-78"><code data-line-number="78"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-78" name="listingsgen_olddatapy-78"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">title</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">unescape</span><span class="p">(</span><span class="n">post</span><span class="p">[</span><span class="s1">'post_title'</span><span class="p">])</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-79"><code data-line-number="79"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-79" name="listingsgen_olddatapy-79"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">content</span> <span class="o">=</span> <span class="n">clean_content</span><span class="p">(</span><span class="n">post</span><span class="p">[</span><span class="s1">'post_content'</span><span class="p">])</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-80"><code data-line-number="80"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-80" name="listingsgen_olddatapy-80"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-81"><code data-line-number="81"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-81" name="listingsgen_olddatapy-81"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">tag_query</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">select</span><span class="p">([</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-82"><code data-line-number="82"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-82" name="listingsgen_olddatapy-82"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">TERMS</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-83"><code data-line-number="83"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-83" name="listingsgen_olddatapy-83"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">])</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-84"><code data-line-number="84"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-84" name="listingsgen_olddatapy-84"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">TERMS</span><span class="o">.</span><span class="n">join</span><span class="p">(</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-85"><code data-line-number="85"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-85" name="listingsgen_olddatapy-85"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">TERM_TAXO</span><span class="p">,</span> <span class="n">TERMS</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">term_id</span> <span class="o">==</span> <span class="n">TERM_TAXO</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">term_id</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-86"><code data-line-number="86"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-86" name="listingsgen_olddatapy-86"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-87"><code data-line-number="87"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-87" name="listingsgen_olddatapy-87"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">TERM_RELS</span><span class="p">,</span> <span class="n">TERM_TAXO</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">term_taxonomy_id</span> <span class="o">==</span> <span class="n">TERM_RELS</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">term_taxonomy_id</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-88"><code data-line-number="88"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-88" name="listingsgen_olddatapy-88"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-89"><code data-line-number="89"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-89" name="listingsgen_olddatapy-89"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">TERM_RELS</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">object_id</span> <span class="o">==</span> <span class="n">post</span><span class="p">[</span><span class="s1">'ID'</span><span class="p">])</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-90"><code data-line-number="90"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-90" name="listingsgen_olddatapy-90"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">tag_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">html</span><span class="o">.</span><span class="n">unescape</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ENGINE</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">tag_query</span><span class="p">)]</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-91"><code data-line-number="91"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-91" name="listingsgen_olddatapy-91"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-92"><code data-line-number="92"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-92" name="listingsgen_olddatapy-92"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">post_meta</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-93"><code data-line-number="93"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-93" name="listingsgen_olddatapy-93"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">post_meta</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">]</span> <span class="o">=</span> <span class="n">slug</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-94"><code data-line-number="94"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-94" name="listingsgen_olddatapy-94"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">post_meta</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">date</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-95"><code data-line-number="95"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-95" name="listingsgen_olddatapy-95"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">updated</span> <span class="o">!=</span> <span class="n">date</span><span class="p">:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-96"><code data-line-number="96"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-96" name="listingsgen_olddatapy-96"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">post_meta</span><span class="p">[</span><span class="s1">'updated'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">updated</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-97"><code data-line-number="97"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-97" name="listingsgen_olddatapy-97"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">post_meta</span><span class="p">[</span><span class="s1">'tags'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tag_list</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-98"><code data-line-number="98"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-98" name="listingsgen_olddatapy-98"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-99"><code data-line-number="99"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-99" name="listingsgen_olddatapy-99"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">TARGET</span><span class="p">,</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">date</span><span class="o">.</span><span class="n">year</span><span class="si">:</span><span class="s1">04d</span><span class="si">}</span><span class="s1">'</span><span class="p">,</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">date</span><span class="o">.</span><span class="n">month</span><span class="si">:</span><span class="s1">02d</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-100"><code data-line-number="100"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-100" name="listingsgen_olddatapy-100"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-101"><code data-line-number="101"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-101" name="listingsgen_olddatapy-101"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s1">.rst'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-102"><code data-line-number="102"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-102" name="listingsgen_olddatapy-102"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">'wt'</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-103"><code data-line-number="103"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-103" name="listingsgen_olddatapy-103"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">title</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-104"><code data-line-number="104"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-104" name="listingsgen_olddatapy-104"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'='</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n\n</span><span class="s1">'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-105"><code data-line-number="105"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-105" name="listingsgen_olddatapy-105"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">post_meta</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-106"><code data-line-number="106"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-106" name="listingsgen_olddatapy-106"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">':</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">:</span> <span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-107"><code data-line-number="107"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-107" name="listingsgen_olddatapy-107"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-108"><code data-line-number="108"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-108" name="listingsgen_olddatapy-108"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-109"><code data-line-number="109"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-109" name="listingsgen_olddatapy-109"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-110"><code data-line-number="110"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-110" name="listingsgen_olddatapy-110"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment_query</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">select</span><span class="p">([</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-111"><code data-line-number="111"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-111" name="listingsgen_olddatapy-111"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">COMMENTS</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-112"><code data-line-number="112"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-112" name="listingsgen_olddatapy-112"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">COMMENTS</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">comment_post_ID</span> <span class="o">==</span> <span class="n">post</span><span class="p">[</span><span class="s1">'ID'</span><span class="p">])</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-113"><code data-line-number="113"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-113" name="listingsgen_olddatapy-113"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="n">ENGINE</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">comment_query</span><span class="p">):</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-114"><code data-line-number="114"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-114" name="listingsgen_olddatapy-114"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">comment</span><span class="p">[</span><span class="s1">'comment_approved'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'1'</span> <span class="ow">or</span> <span class="n">comment</span><span class="p">[</span><span class="s1">'comment_ID'</span><span class="p">]</span> <span class="ow">in</span> <span class="n">COMMENT_BLACKLIST</span><span class="p">:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-115"><code data-line-number="115"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-115" name="listingsgen_olddatapy-115"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">print</span><span class="p">(</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-116"><code data-line-number="116"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-116" name="listingsgen_olddatapy-116"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s1">' -! skipping unapproved:'</span><span class="p">,</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-117"><code data-line-number="117"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-117" name="listingsgen_olddatapy-117"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment</span><span class="p">[</span><span class="s1">'comment_ID'</span><span class="p">],</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-118"><code data-line-number="118"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-118" name="listingsgen_olddatapy-118"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment</span><span class="p">[</span><span class="s1">'comment_author'</span><span class="p">])</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-119"><code data-line-number="119"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-119" name="listingsgen_olddatapy-119"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">continue</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-120"><code data-line-number="120"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-120" name="listingsgen_olddatapy-120"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">print</span><span class="p">(</span><span class="s1">' - processing comment'</span><span class="p">,</span> <span class="n">comment</span><span class="p">[</span><span class="s1">'comment_ID'</span><span class="p">])</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-121"><code data-line-number="121"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-121" name="listingsgen_olddatapy-121"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">cid</span> <span class="o">=</span> <span class="n">comment</span><span class="p">[</span><span class="s1">'comment_ID'</span><span class="p">]</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-122"><code data-line-number="122"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-122" name="listingsgen_olddatapy-122"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">cauthor</span> <span class="o">=</span> <span class="n">text_fix</span><span class="p">(</span><span class="n">comment</span><span class="p">[</span><span class="s1">'comment_author'</span><span class="p">])</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-123"><code data-line-number="123"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-123" name="listingsgen_olddatapy-123"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">cauthor_email</span> <span class="o">=</span> <span class="n">comment</span><span class="p">[</span><span class="s1">'comment_author_email'</span><span class="p">]</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-124"><code data-line-number="124"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-124" name="listingsgen_olddatapy-124"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">cauthor_url</span> <span class="o">=</span> <span class="n">comment</span><span class="p">[</span><span class="s1">'comment_author_url'</span><span class="p">]</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-125"><code data-line-number="125"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-125" name="listingsgen_olddatapy-125"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">cdate</span> <span class="o">=</span> <span class="n">comment</span><span class="p">[</span><span class="s1">'comment_date_gmt'</span><span class="p">]</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-126"><code data-line-number="126"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-126" name="listingsgen_olddatapy-126"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">cparent</span> <span class="o">=</span> <span class="n">comment</span><span class="p">[</span><span class="s1">'comment_parent'</span><span class="p">]</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-127"><code data-line-number="127"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-127" name="listingsgen_olddatapy-127"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ccontent</span> <span class="o">=</span> <span class="n">clean_content</span><span class="p">(</span><span class="n">comment</span><span class="p">[</span><span class="s1">'comment_content'</span><span class="p">])</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-128"><code data-line-number="128"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-128" name="listingsgen_olddatapy-128"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-129"><code data-line-number="129"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-129" name="listingsgen_olddatapy-129"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment_meta</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-130"><code data-line-number="130"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-130" name="listingsgen_olddatapy-130"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment_meta</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-131"><code data-line-number="131"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-131" name="listingsgen_olddatapy-131"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">cparent</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-132"><code data-line-number="132"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-132" name="listingsgen_olddatapy-132"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment_meta</span><span class="p">[</span><span class="s1">'parent_id'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cparent</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-133"><code data-line-number="133"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-133" name="listingsgen_olddatapy-133"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment_meta</span><span class="p">[</span><span class="s1">'author'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cauthor</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-134"><code data-line-number="134"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-134" name="listingsgen_olddatapy-134"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">cauthor_email</span><span class="p">:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-135"><code data-line-number="135"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-135" name="listingsgen_olddatapy-135"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment_meta</span><span class="p">[</span><span class="s1">'author_email'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cauthor_email</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-136"><code data-line-number="136"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-136" name="listingsgen_olddatapy-136"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">cauthor_url</span><span class="p">:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-137"><code data-line-number="137"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-137" name="listingsgen_olddatapy-137"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment_meta</span><span class="p">[</span><span class="s1">'author_url'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cauthor_url</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-138"><code data-line-number="138"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-138" name="listingsgen_olddatapy-138"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment_meta</span><span class="p">[</span><span class="s1">'date_utc'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cdate</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-139"><code data-line-number="139"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-139" name="listingsgen_olddatapy-139"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">comment_meta</span><span class="p">[</span><span class="s1">'compiler'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'rest'</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-140"><code data-line-number="140"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-140" name="listingsgen_olddatapy-140"></a></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-141"><code data-line-number="141"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-141" name="listingsgen_olddatapy-141"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">cpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">cid</span><span class="si">}</span><span class="s1">.wpcomment'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-142"><code data-line-number="142"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-142" name="listingsgen_olddatapy-142"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cpath</span><span class="p">,</span> <span class="s1">'wt'</span><span class="p">)</span> <span class="k">as</span> <span class="n">coutfile</span><span class="p">:</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-143"><code data-line-number="143"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-143" name="listingsgen_olddatapy-143"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">comment_meta</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-144"><code data-line-number="144"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-144" name="listingsgen_olddatapy-144"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">coutfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">'..</span> <span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">:</span> <span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-145"><code data-line-number="145"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-145" name="listingsgen_olddatapy-145"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">coutfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span></code></td>
          </tr>
          <tr>
            <td class="linenos linenodiv">
              <a href="#listingsgen_olddatapy-146"><code data-line-number="146"></code></a>
            </td>
            <td class="code"><code><a id="listingsgen_olddatapy-146" name="listingsgen_olddatapy-146"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">coutfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ccontent</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span></code></td>
          </tr>
        </table>
      </div>
    </main>
    <footer id="footer">
      <p>Contents ©2004-2022 <a href="/about/about-person.html">George Leslie-Waksman</a> | Source: <img class="svg-icon" src="/icons/github.svg"><a href="https://github.com/gwax/www-gwax">GitHub</a> | Powered by <a href="https://getnikola.com">Nikola</a> | Styled with <a href="http://getskeleton.com">Skeleton</a> | <a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="license"><img alt="Creative Commons License BY-SA" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" style="border:0;margin:0;"></a></p>
    </footer>
  </div>
  <script src="/assets/js/baguetteBox.min.js"></script>
  <script src="/assets/js/webfontloader.js"></script>
  <script src="/assets/js/fancydates.js"></script>
  <script src="/assets/js/theme.js"></script><!-- fancy dates -->
  <script>

    fancydates(1);
  </script><!-- end fancy dates -->
  <script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    WebFont.load({
        google: {
            families: ['IBM Plex Mono', 'Raleway', 'Pacifico']
        }
    });
  </script>
</body>
</html>
